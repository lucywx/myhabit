# 惩罚设置功能说明

## 功能概述

在目标设置页面新增了惩罚设置功能，当用户某天没有按时打卡时，系统会自动执行预设的惩罚机制。

## 功能特点

### 1. 惩罚金额设置
- 用户可以设置惩罚金额（支持小数，如10.50元）
- 金额为0时表示不启用惩罚机制

### 2. 惩罚类型选择
- **转账给平台**：惩罚金额将转入平台账户
- **转账给朋友**：惩罚金额将转入指定朋友的账户

### 3. 朋友联系方式
- 当选择"转账给朋友"时，需要填写朋友的联系方式
- 支持微信、支付宝账号或手机号等联系方式

## 使用方法

### 设置惩罚机制
1. 进入"我的目标"页面
2. 填写基本目标信息（每日目标数量、持续天数）
3. 在"惩罚设置"部分：
   - 设置惩罚金额
   - 选择惩罚类型
   - 如果选择"转账给朋友"，填写朋友联系方式
4. 点击"保存目标"完成设置

### 查看惩罚状态
1. 进入"小惩罚"页面
2. 系统会自动检查今日是否已打卡
3. 如果未打卡且设置了惩罚机制，会显示详细的惩罚信息

## 技术实现

### 前端
- `SetGoalPage.jsx`：目标设置页面，包含惩罚设置表单
- `SetGoalPage.css`：页面样式文件
- `CheckMissedPage.js`：打卡检查页面，显示惩罚状态

### 后端
- `Goal.js`：数据模型，包含惩罚设置字段
- `setGoal.js`：设置目标接口，处理惩罚设置保存
- `checkMissed.js`：打卡检查接口，执行惩罚逻辑

### 数据结构
```javascript
{
  userId: ObjectId,
  startDate: String,
  days: Number,
  dailyTarget: Number,
  punishment: {
    amount: Number,        // 惩罚金额
    type: String,          // 'platform' 或 'friend'
    friendContact: String  // 朋友联系方式
  }
}
```

## 注意事项

1. 惩罚机制目前为模拟实现，实际转账功能需要集成第三方支付接口
2. 建议合理设置惩罚金额，避免设置过高影响用户体验
3. 朋友联系方式仅用于显示，实际转账需要用户手动操作
4. 系统会在每天检查打卡状态时自动触发惩罚机制

## 未来改进

1. 集成真实的支付接口
2. 添加惩罚历史记录
3. 支持多种惩罚方式（如捐赠给慈善机构）
4. 添加惩罚提醒功能
5. 支持惩罚金额的动态调整 